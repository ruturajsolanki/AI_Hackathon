@startuml Customer_Journey_Flow

skinparam backgroundColor #1a1a2e
skinparam defaultFontColor #e8e8e8
skinparam defaultFontSize 12

skinparam activity {
    BackgroundColor #2d2d44
    BorderColor #6366f1
    FontColor #e8e8e8
    DiamondBackgroundColor #2d2d44
    DiamondBorderColor #f59e0b
}

skinparam note {
    BackgroundColor #1e3a5f
    BorderColor #06b6d4
    FontColor #e8e8e8
}

skinparam partition {
    BackgroundColor #1e1e30
    BorderColor #4b5563
    FontColor #a5b4fc
}

title AI Call Center - Customer Journey\nEnd-to-End Interaction Flow

start

partition "Customer" {
    :Start Call\n(Voice or Chat);
}

partition "AI System" {
    :Greeting\n"Hello! Thank you for calling.\nHow can I help you today?";
}

partition "Customer" {
    :State Issue\n"I want to check on my order ORD10024";
}

partition "AI System" {
    :Process Voice/Text\n- Speech-to-Text (if voice)\n- Waveform Visualization\n- "AI is thinking..." indicator;
    
    :Primary Agent Analysis\n--\nIntent: order_status\nEmotion: neutral\nConfidence: 95%;
    
    :Knowledge Base Search\n- Semantic search (embeddings)\n- Order lookup: ORD10024\n- Found: SHIPPED;
    
    :Supervisor Review\n- Quality check: Passed\n- Compliance: Compliant\n- Tone: Appropriate;
    
    note right
      Fast-Path:
      High confidence (>80%)
      + simple query
      = Skip LLM review
    end note
    
    :Deliver Response\n"Your order is SHIPPED.\nTracking: 1Z999AA10123456799\nEstimated delivery: Feb 5th";
}

partition "Customer" {
    if (Satisfied?) then (yes)
        :Express Satisfaction\n"That's all I needed, thank you!";
        
        partition "AI System" {
            :Mark Resolved\n- Detect satisfaction keywords\n- Status: RESOLVED;
            
            :Generate Report\n- Summary of conversation\n- Topics discussed\n- Sentiment journey;
        }
        
        stop
        
    else (no - frustrated)
        :Request Escalation\n"I want to speak to a manager NOW!";
        
        partition "AI System" {
            :Escalation Agent\n--\nTrigger: Manager request\nEmotion: Frustrated\nPriority: HIGH;
            
            :Create Support Ticket\n- Full conversation history\n- Detected intent and emotion\n- Recommended actions;
            
            :Generate Session URL\nCustomer and Agent chat links;
        }
        
        partition "Human Agent" {
            :Agent Accepts Ticket\nViews full context;
            
            :Live Chat Session\nHuman resolves complex issue;
        }
        
        :Issue Resolved by Human;
        stop
        
    endif
}

@enduml
